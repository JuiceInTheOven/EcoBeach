\chapter{The Solution}

In this chapter EcoBeach, a highly resilient distributed system that can process satellite imagery in real-time and analyze the difference in water levels on given geo-locations, will be presented. 
EcoBeach collects data from beach locations (hence the name EcoBeach) in Denmark, Sweden, Germany, and the United Kingdom. Limiting geo locations to beaches in select countries is a deliberate choice, as the available server resources currently restrict the solution's scalability. \medbreak
\noindent
In \autoref{sec:solution-approach} \nameref{sec:solution-approach} EcoBeach will be described at a high-level. First, a summary of solutions to the sub-problems in \autoref{sec:problem-description} is given. Next, the infrastructure of EcoBeach is presented to show how the solutions to each of the sub-problems complement each other to provide a feasible solution to monitoring shorelines.

Lastly, the advantages and disadvantages of EcoBeach will be presented, along with future work that can potentially alleviate some of the disadvantages.

\section{Solution Approach}\label{sec:solution-approach}

EcoBeach consists of services that each play a crucial role in monitoring shorelines. There is a total of 8\todo{just correct this if I am wrong} services as shown in \autoref{tab:ecobeach-services}.

\begin{table}[]
    \centering
    \begin{tabular}{|l|l|}
        \hline
        \textbf{Service name}   & \textbf{Service description} \\ \hline
        Sentinel NDWI Scraper   &                              \\\hline
        Kafka                   &                              \\\hline
        Hadoop                  &                              \\\hline
        Zookeeper               &                              \\\hline
        MongoDB                 &                              \\\hline
        MongoDB Kafka Connector &                              \\\hline
        WebAPI                  &                              \\\hline
        Android Application     &                              \\\hline
    \end{tabular}
    \caption{The services that make up EcoBeach}
    \label{tab:ecobeach-services}
\end{table}

\noindent
The services in EcoBeach were chosen or created to provide solutions to the sub-problems. Below a summary of each solution to the sub-problems is presented.

\paragraph{How to download satellite images from Copernicus?} To download satellite images from Copernicus we created a resilient scraping service that continously downloads and pre-processes satellite images on given geo-locations. The scraping service is described in detail in \autoref{subsec:sentinel-satellite-scraper}.

\paragraph{How to process images so water is differentiated from land?} For this purpose we create a Spark Job, that analyzes downloaded sattelite images utlizing a water based NDWI \todo{gls usage} filter, to determine what is water or land. The NDWI Analyzer is described in \autoref{subsec:ndwi-analyzer}.

\paragraph{How to build a system capable of handling huge amounts of data?}
\paragraph{How to build a system capable of real-time processing?}
\paragraph{How to build a highly resilient system?}
\paragraph{How to build a mobile application that uses mobile sensing in a meaningful way to visualize shoreline changes?}

\subsection{The infrastruture}
- Present the infrastructure diagram
- Explain the infrastructure diagram
- dont go in depth here, thats what we have the Hosting Setup for.

\subsection{Advantages and disadvantages of EcoBeach}
- Advantages of the solution
- Disadvantages of the solution

\subsection{Future work}
- Future work

\section{Solution Description}

In this section, an in-depth description of the solution is presented.  First, the hosting setup and the central services that drive the data pipeline are explained. After this, the services that create, read, or process data in EcoBeach are presented.

\subsection{Hosting Setup}

- Containerization and Container Orchestration
- Server setup
    - How many nodes?
    - Resources?
    - Resource allocation
    - Security
    - etc...

\subsection{HDFS, Kafka, Spark and MongoDb}

– Purpose (Why?)
– Context (When?)
– Description (How?)

- Distributed File System
- Distributed Event Streaming
- Large-scale data analytics
- Distributed Database

\subsection{Sentinel Satellite Scraper}\label{subsec:sentinel-satellite-scraper}

– Purpose (Why?)
– Context (When?)
– Description (How?)

\subsection{NDWI Analyzer}\label{subsec:ndwi-analyzer}

– Purpose (Why?)
– Context (When?)
– Description (How?)

\subsection{WebAPI}

\subsection{EcoBeach App}





